/*! js-ruby 2013-08-21 */
!function(){var a=this,b=Array.prototype,c=Object.prototype;Function.prototype;var d=a.Ruby=function(a){return a instanceof d?a:this instanceof d?(this._wrapped=a,void 0):new d(a)};d.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},void 0===Array.isArray&&(Array.isArray=function(a){return a instanceof Array});var e=function(a,b,c){if(null!==a)if(Array.isArray(a))for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a);else if("object"==typeof a)for(var g=d.keys(a),h=0,i=g.length;i>h;h++)b.call(c,a[g[h]],g[h],a)};d.each=e;var f=function(a,b,c){var d=[];return e(a,function(a){var e=b.call(c,a);d.push(e)}),d};d.map=d.collect=f,d.inject=d.reduce=d.inject=function(a,b,c,d){return e(a,function(e,f){c=b.call(d,c,e,f,a)}),c},d.find=d.detect=function(a,b,c){if(Array.isArray(a)){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],a))return a[d]}else for(var f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],a))return a[f]},d.filter=d.select=function(a,b,c){var d=[];return e(a,function(a){b.call(c,a)&&d.push(a)}),d};var g=d.where=function(a,b){var c=[],f=!1;return e(a,function(a){var g=d.keys(b);d.keys(a),e(g,function(c){a[c]===b[c]&&(f=!0)}),f===!0&&(c.push(a),f=!1)}),c};d.findWhere=function(a,b){return g(a,b)[0]},d.reject=function(a,b,c){var d=[];return e(a,function(a){b.call(c,a)||d.push(a)}),d},d.every=d.all=function(a,b,c){var d=!1;return e(a,function(a){b.call(c,a)||(d=!0)}),!d},d.some=d.any=function(a,b,c){var d=!1;return e(a,function(a){b.call(c,a)&&(d=!0)}),d},d.contains=d.include=function(a,b){var c=!1;return e(a,function(a){a===b&&(c=!0)}),c},d.pluck=function(a,b){var c=[];return e(a,function(a){c.push(a[b])}),c},d.max=function(a,b,c){if(b&&a.length<65535){var d=[];return e(a,function(a){d.push(b.call(c,a))}),Math.max.apply(Math,d)}return Math.max.apply(Math,a)},d.min=function(a,b,c){if(b&&a.length<65535){var d=[];return e(a,function(a){d.push(b.call(c,a))}),Math.min.apply(Math,d)}return Math.min.apply(Math,a)};var h=function(a){return"function"==typeof a?a:function(b){return b[a]}};d.sortBy=function(a,b,c){var e=h(b);return d.pluck(d.map(a,function(a,b,d){return{value:a,index:b,criteria:e.call(c,a,b,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")},d.groupBy=function(a,b,c){var d=h(b),f={};return e(a,function(b,e){var g=d.call(c,b,e,a);void 0!==f[g]?(f[g]=[f[g]],f[g].push(b)):f[g]=b}),f},d.first=function(a){return a[0]},d.initial=function(a){return clone=a.slice(0),clone.pop(),clone},d.last=function(a){return a[a.length-1]},d.rest=function(a,b){var c=a.slice(0);return c.splice(c.indexOf(b),1),c},d.compact=function(a){return d.filter(a,function(a){return a})},d.flatten=function(a,b){function d(a,b){"[object Array]"!==c.toString.call(a)?f.push(a):(g++,e(a,function(a){1===g&&b?f.push(a):d(a)}))}var f=[],g=0;return e(a,function(a){d(a,b),g=0}),f},d.indexOf=function(a,c){return b.indexOf.call(a,c)}}.call(this);